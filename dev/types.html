<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Types · Electrum.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">Electrum.jl</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li class="is-active"><a class="tocitem" href="types.html">Types</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Lattices-and-basis-vectors"><span>Lattices and basis vectors</span></a></li><li><a class="tocitem" href="#Basis-vectors"><span>Basis vectors</span></a></li><li class="toplevel"><a class="tocitem" href="#Real-and-reciprocal-lattices"><span>Real and reciprocal lattices</span></a></li><li><a class="tocitem" href="#Crystals"><span>Crystals</span></a></li><li class="toplevel"><a class="tocitem" href="#Datasets"><span>Datasets</span></a></li><li><a class="tocitem" href="#Real-space-datagrids"><span>Real space datagrids</span></a></li></ul></li><li><a class="tocitem" href="filetypes.html">File formats</a></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="api/lattices.html">Lattices</a></li><li><a class="tocitem" href="api/atoms.html">Atoms</a></li><li><a class="tocitem" href="api/crystals.html">Crystals</a></li><li><a class="tocitem" href="api/data.html">Crystal data</a></li><li><a class="tocitem" href="api/filetypes.html">File formats</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="types.html">Types</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="types.html">Types</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/brainandforce/Electrum.jl/blob/main/docs/src/types.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Types"><a class="docs-heading-anchor" href="#Types">Types</a><a id="Types-1"></a><a class="docs-heading-anchor-permalink" href="#Types" title="Permalink"></a></h1><p>Electurm.jl provides a rich type system for handling a variety of data that may arise in  computational work with crystalline materials. Many of these types are generic enough to handle  cases of crystals in arbitrary dimension, which may be useful for theoretical work or for handling complicated real-world cases, such as incommensurately modulated crystals.</p><h1 id="Lattices-and-basis-vectors"><a class="docs-heading-anchor" href="#Lattices-and-basis-vectors">Lattices and basis vectors</a><a id="Lattices-and-basis-vectors-1"></a><a class="docs-heading-anchor-permalink" href="#Lattices-and-basis-vectors" title="Permalink"></a></h1><h2 id="Basis-vectors"><a class="docs-heading-anchor" href="#Basis-vectors">Basis vectors</a><a id="Basis-vectors-1"></a><a class="docs-heading-anchor-permalink" href="#Basis-vectors" title="Permalink"></a></h2><p>The <code>AbstractBasis</code> type contains two subtypes, <code>RealBasis</code> and <code>ReciprocalBasis</code>, which can be used to represent the basis vectors of a crystal.</p><p><code>AbstractBasis</code> types use the following conventions:</p><ul><li>The units are assumed to be angstroms or inverse angstroms.</li><li>Conversion between the two involve a factor of 2π (multiplication for the <code>RealBasis</code> &gt;  </li></ul><p><code>ReciprocalBasis</code> conversion, and vice versa).</p><h3 id="Why-not-use-SMatrix-for-basis-vectors?"><a class="docs-heading-anchor" href="#Why-not-use-SMatrix-for-basis-vectors?">Why not use <code>SMatrix</code> for basis vectors?</a><a id="Why-not-use-SMatrix-for-basis-vectors?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-not-use-SMatrix-for-basis-vectors?" title="Permalink"></a></h3><p>While the <code>SMatrix</code> type seems to make sense for a collection of basis vectors, it poses one major  problem: the calculation of type parameters.</p><p>The <code>SMatrix{D1,D2,T,L}</code> type requires four type parameters - <code>D1</code> and <code>D2</code> are each of the matrix dimensions, and <code>T</code> is the element type of the matrix. However, one last parameter is needed: <code>L</code>,  the length of the <code>NTuple</code> that backs the <code>SMatrix</code>.</p><p>Julia currently does not allow for the calculation of type parameters from other type parameters, which poses a serious problem in the declaration of structs. Technically, a type like <code>SMatrix{3,3,Float64}</code> is an abstract type, as the <code>L</code> parameter is undeclared, even though the  value of <code>L</code> can be inferred from <code>D1</code> and <code>D2</code>. By declaring a struct to have this type, there seems to be a significant performance drop.</p><p>The <code>AbstractBasis{D}</code> types wrap an <code>SVector{D,SVector{D,Float64}}</code>. This only requires a single  type parameter <code>D</code>, and allows for fully concrete struct declarations. Various methods are defined on this type to make it work like a normal matrix, such as matrix multiplication.</p><p>The other issue is that there are contexts where real space basis vectors are easier to use and others where reciprocal basis vectors are easier to use. It&#39;s better to treat them as two interconvertible types for that reason.</p><h1 id="Real-and-reciprocal-lattices"><a class="docs-heading-anchor" href="#Real-and-reciprocal-lattices">Real and reciprocal lattices</a><a id="Real-and-reciprocal-lattices-1"></a><a class="docs-heading-anchor-permalink" href="#Real-and-reciprocal-lattices" title="Permalink"></a></h1><p>Electrum.jl provides real and reciprocal lattices as their own types: <code>RealLattice</code> and  <code>ReciprocalLattice</code>. Both of these are instances of <code>AbstractLattice</code>, and they may be freely converted between each other.</p><p><code>AbstractLattice</code> types consist of pairs of <code>BasisVectors</code>, a primitive set of basis vectors which may be accessed with <code>prim()</code> and a conventional set of basis vectors which may be accessed with <code>conv()</code>.</p><h2 id="Crystals"><a class="docs-heading-anchor" href="#Crystals">Crystals</a><a id="Crystals-1"></a><a class="docs-heading-anchor-permalink" href="#Crystals" title="Permalink"></a></h2><p>The <code>AbstractCrystal</code> supertype contains two concrete types, <code>Crystal{D}</code> and  <code>CrystalWithDatasets{D,K,V}</code>. The <code>CrystalWithDatasets</code> type is a combination of a <code>Crystal{D}</code> with a <code>Dict{K,V}</code>. </p><h3 id="Crystal"><a class="docs-heading-anchor" href="#Crystal"><code>Crystal</code></a><a id="Crystal-1"></a><a class="docs-heading-anchor-permalink" href="#Crystal" title="Permalink"></a></h3><p>The <code>Crystal</code> data type consists of five pieces of information:</p><ul><li>A real space lattice (<code>latt::RealLattice{D}</code>)</li><li>The space group number (<code>sgno::Int</code>)</li><li>The offset of the space group origin from the cell origin (<code>orig::SVector{D,Float64}</code>)</li><li>The generating set of atomic positions (<code>gen::AtomList{D}</code>)</li><li>The explicitly included set of atomic positions, or template (<code>pos::AtomList{D}</code>)</li></ul><p>There are two sets of atomic positions included: <code>gen</code> contains all of the atomic positions needed to describe the unit cell, and <code>pos</code> contains explicitly generated sites. The positions in <code>pos</code>  can be used to select sites to write to a file or display in a plot.</p><p>Currently, Electrum.jl does not deal with space group information, so the inclusion of a space group number or origin offset does not have any effect internally. In the future, we may be able to use this information to reduce the number of atomic positions stored in <code>gen</code> to the minimum generating set of atoms.</p><h3 id="CrystalWithDatasets"><a class="docs-heading-anchor" href="#CrystalWithDatasets"><code>CrystalWithDatasets</code></a><a id="CrystalWithDatasets-1"></a><a class="docs-heading-anchor-permalink" href="#CrystalWithDatasets" title="Permalink"></a></h3><p><code>CrystalWithDatasets{D,K,V}</code> is a struct that pairs a <code>Crystal{D}</code> with a <code>Dict{K,V}</code>. <code>CrystalWithDatasets</code> objects generated by Electrum.jl will almost always have <code>K</code> be a <code>String</code>.</p><p>You can access datasets with <code>getindex()</code>, so a <code>CrystalWithDatasets</code> behaves similarly to a  dictionary. It should be noted that autocompletion is not currently supported for <code>CrystalWithDatasets</code>, and due to how Julia REPL functionality is implemented, adding this functionality may not be possible for the foreseeable future.</p><h1 id="Datasets"><a class="docs-heading-anchor" href="#Datasets">Datasets</a><a id="Datasets-1"></a><a class="docs-heading-anchor-permalink" href="#Datasets" title="Permalink"></a></h1><p>Electrum.jl supports a good number of different data types, including:</p><ul><li>Real space datagrids</li><li>Reciprocal space data by HKL index</li><li>Band structures and densities of states</li><li>k-point lists and grids</li><li>Data by atomic position</li><li>Spherical harmonic coefficients</li></ul><h2 id="Real-space-datagrids"><a class="docs-heading-anchor" href="#Real-space-datagrids">Real space datagrids</a><a id="Real-space-datagrids-1"></a><a class="docs-heading-anchor-permalink" href="#Real-space-datagrids" title="Permalink"></a></h2><p>Real space data is usually represented with a <code>RealSpaceDatagrid{D,T}</code>, which consists of the following:</p><ul><li>The basis vectors that define the unit cell which is described by the data </li></ul><p>(<code>latt::BasisVectors{D}</code>)</p><ul><li>The shift of the data grid off of the unit cell origin (<code>orig::SVector{D,Float64}</code>)</li><li>The grid of data values (<code>grid::Array{T,D}</code>)</li></ul><h3 id="Mathematical-operations-on-RealSpaceDataGrid"><a class="docs-heading-anchor" href="#Mathematical-operations-on-RealSpaceDataGrid">Mathematical operations on <code>RealSpaceDataGrid</code></a><a id="Mathematical-operations-on-RealSpaceDataGrid-1"></a><a class="docs-heading-anchor-permalink" href="#Mathematical-operations-on-RealSpaceDataGrid" title="Permalink"></a></h3><p>Supported unary mathematical operations on a <code>RealSpaceDataGrid</code> are negation (<code>-</code>) and the fast  Fourier transform (<code>FFTW.fft()</code>).</p><p>Binary operations, however, need checks to ensure that two grids are compatible with each other. &quot;Compatible&quot; means:</p><ul><li>The datagrids are of the same spatial dimension.</li><li>The basis vectors of both grids are identical.</li><li>The shifts of both grids are identical.</li><li>The number of elements along each dimension are identical.</li></ul><p>Failure to meet any of these criteria will result in an <code>AssertionError</code> being thrown. The internal function <code>Electrum.grid_check()</code> performs these checks and is called before binary operations are  performed.</p><p>In the future, we may relax the third requirement by using interpolation, though a warning will be thrown if this is invoked.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="index.html">« Home</a><a class="docs-footer-nextpage" href="filetypes.html">File formats »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Wednesday 29 March 2023 19:21">Wednesday 29 March 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
